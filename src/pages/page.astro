---
const components = await Astro.glob('../components/*.astro');

const { story } = Astro.props;
---

<main>
  {story?.content?.body?.map((blok: { component: any; }) => {
    return components.map((component) => {
     const splitPath = component.file.split('/');
     const arrayLength = splitPath.length;
     const splitComponent = splitPath[arrayLength - 1].split('.');
     const componentName = splitComponent[0];

     if (blok.component.toLowerCase() === componentName.toLowerCase()) {
       return <component.default blok={blok} />
     }
   });
 })}
</main>